<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>

		<!-- Load css File -->
		<template id="my_custom_css_asset" name="my_custom_css assets" inherit_id="web.assets_backend">
		  <xpath expr="." position="inside">
			<link rel="stylesheet" href="/purchase_order/static/src/css/my_custom_style.css"/>
		  </xpath>
		</template>

		<template id="my_custom_css_asset_frontend" name="my_custom_css_front assets" inherit_id="website.assets_frontend">
		  <xpath expr="." position="inside">
			<link rel="stylesheet" href="/purchase_order/static/src/css/my_custom_style.css"/>
		  </xpath>
		</template>

		<!-- Purchase Tree View -->
		<record id="view_purchase_tree_inherit_ext" model="ir.ui.view">
			<field name="name">view.purchase.tree.inherit.ext</field>
			<field name="model">purchase.order</field>
			<field name="inherit_id" ref="purchase.purchase_order_tree" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='amount_untaxed']" position="before">
					<field name="payment_method_id" />
				</xpath>
			</field>
		</record>

		<!-- Purchase Form View -->
		<record id="view_purchase_form_inherit_ext" model="ir.ui.view">
			<field name="name">view.purchase.form.inherit.ext</field>
			<field name="model">purchase.order</field>
			<field name="inherit_id" ref="purchase.purchase_order_form" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='order_line']/tree" position="attributes">
					<attribute name="class">oe_list oe_view oe_formview oe_form_editable oe_list_editable oe_editing oe_list_custom</attribute>
				</xpath>
				<xpath expr="//field[@name='state']" position="attributes">
					<attribute name="statusbar_visible">draft,sent,bid,approved,done</attribute>
				</xpath>
				<xpath expr="//button[@name='wkf_send_rfq']" position="after">
					<button name="wkf_po_done" states="approved" string="Set To Done"
						type="object" />
				</xpath>

				<xpath expr="//button[@name='wkf_po_done']" position="after">
					<button name="action_paid" states="approved" string="Paid"
							type="object" invisible="context.get('default_burmart_order_field_hide')" groups="base.group_po_paid_partial" />
				</xpath>

				<xpath expr="//button[@name='action_paid']" position="before">
					<button name="action_partial_complete" states="paid" string="Partial Complete"
							type="object" invisible="context.get('default_burmart_order_field_hide')" groups="base.group_po_paid_partial" />
				</xpath>

				<xpath expr="//button[@name='action_partial_complete']" position="before">
					<button name="wkf_po_done" states="paid" string="Set To Done"
							type="object" invisible="context.get('default_burmart_order_field_hide')" />
				</xpath>

				<xpath expr="//button[@name='action_partial_complete']" position="after">
					<button name="wkf_po_done" states="partial_complete" string="Set To Done"
							type="object" invisible="context.get('default_burmart_order_field_hide')" />
				</xpath>

				<xpath expr="//field[@name='incoterm_id']" position="replace">
				</xpath>

				<xpath expr="//field[@name='notes']" position="before">
					<field name="inword" placeholder="Amount In Words" />
					<field name="payment_method_id" attrs="{'invisible':[('is_burmart_order','!=',True)]}" />
				</xpath>

				<xpath expr="//field[@name='picking_type_id']" position="after">
					<field name="incoterm_id" />
					<!-- <field name="inword" /> -->
					<!-- <field name="is_margin" /> -->
				</xpath>
				<xpath expr="//field[@name='price_subtotal']" position="after">
					<!-- <field name="is_agreed" invisible="1" /> -->
					<!-- <field name="is_margin" invisible="1" /> -->

					<field name="agreed_price" />
					<field name="gross_margin" />
				</xpath>
				<xpath expr="//field[@name='date_approve']" position="after">
					<field name="is_burmart_order" />
				</xpath>

				<xpath expr="//notebook/page[@string='Deliveries &amp; Invoices']" position="after">
					<page string="Account Info" name="account_info" attrs="{'invisible':[('is_burmart_order','!=',True)]}">
						<field name='bank_ids' />
					</page>
				</xpath>

				<!--add columns in line-->
				<xpath expr="//field[@name='order_line']/tree//field[@name='gross_margin']" position="after">
<!--				<xpath expr="//field[@name='order_line']" position="inside">-->
					<field name="sku_status" invisible="context.get('default_burmart_order_field_hide')" />
					<field name="estimated_expiration_date" string="Expiration Date(Days)" invisible="context.get('default_burmart_order_field_hide')" />
					<field name="shelf_life" string="Shelf Life(Days)" invisible="context.get('default_burmart_order_field_hide')" />
				</xpath>
				<xpath expr="//field[@name='order_line']/tree//field[@name='price_unit']" position="after">
					<field name="margin" readonly="1" string="Margin(%)" invisible="context.get('default_burmart_order_field_hide')" />
					<field name="previous_buying_price" invisible="context.get('default_burmart_order_field_hide')" />
					<field name="difference_amount" readonly="1" invisible="context.get('default_burmart_order_field_hide')" />
					<field name="difference_status" readonly="1" invisible="context.get('default_burmart_order_field_hide')" />
					<field name="discount" invisible="context.get('default_burmart_order_field_hide')" />
					<field name="discount_amt" invisible="context.get('default_burmart_order_field_hide')" />
				</xpath>
				<xpath expr="//field[@name='order_line']/tree//field[@name='price_unit']" position="before">
					<field name="market_selling_price" invisible="context.get('default_burmart_order_field_hide')" />
				</xpath>

				<xpath expr="//field[@name='order_line']/tree//field[@name='company_id']" position="replace">
				</xpath>

			</field>
		</record>
		
		<record id="inherit_account_invoice_supplier_agreed" model="ir.ui.view">
			<field name="name">account.invoice.form</field>
			<field name="model">account.invoice</field>
			<field name="inherit_id" ref="account.invoice_supplier_form" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='currency_id']" position="after">
					<!-- <button name="claim_journal" states="open" string="Submit Claim" 
						attrs="{'invisible':[('state','!=',('open')),('type','!=','in_invoice')]}" 
						/> -->

					<field name="journal_claim" invisible="1" />
					<field name="due_date_rate" attrs="{'readonly' : [('journal_claim', '=', True)]}" />
					<button name="claim_journal" string="Submit Claim" type="object"
						class="oe_highlight"
						attrs="{'invisible':['|',('state','in',('done','draft','proforma','proforma2','credit_state','paid','cancel')),('journal_claim','=',True)]}" />
				</xpath>

				<field name="price_subtotal" position="after">
					<field name="agreed_price" groups="purchase.group_purchase_manager" />
					<field name="gross_margin" groups="purchase.group_purchase_manager" />
				</field>
			</field>
		</record>
		<record id="view_location_form_address" model="ir.ui.view">
			<field name="name">view.location.form</field>
			<field name="model">stock.location</field>
			<field name="inherit_id" ref="stock.view_location_form" />
			<field name="arch" type="xml">
				<data>
					<xpath expr="//field[@name='partner_id']" position="after">

						<field name="address" />
					</xpath>
				</data>
			</field>
		</record>

        <record id="burmart_purchase_form_action" model="ir.actions.act_window">
            <field name="name">Burmart Purchase Orders</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">purchase.order</field>
            <field name="view_mode">tree,form,graph,calendar</field>
            <field name="context">{}</field>
            <field name="domain">[('is_burmart_order','=',True)]</field> 
			<field name="context">{
				'default_is_burmart_order':True
				}
			</field>           
            <field name="search_view_id" ref="purchase.view_purchase_order_filter"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a quotation that will be converted into a purchase order. 
              </p><p>
                Use this menu to search within your purchase orders by
                references, supplier, products, etc. For each purchase order,
                you can track the related discussion with the supplier, control
                the products received and control the supplier invoices.
              </p>
            </field>
        </record>
        
        <menuitem action="burmart_purchase_form_action" id="menu_burmart_purchase_form_action" parent="purchase.menu_procurement_management" sequence="7"/>
		
	</data>
</openerp>