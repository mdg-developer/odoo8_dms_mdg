<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>

		<!-- Load css File -->
		<template id="my_custom_css_asset" name="my_custom_css assets" inherit_id="web.assets_backend">
		  <xpath expr="." position="inside">
			<link rel="stylesheet" href="/purchase_order/static/src/css/my_custom_style.css"/>
		  </xpath>
		</template>

		<template id="my_custom_css_asset_frontend" name="my_custom_css_front assets" inherit_id="website.assets_frontend">
		  <xpath expr="." position="inside">
			<link rel="stylesheet" href="/purchase_order/static/src/css/my_custom_style.css"/>
		  </xpath>
		</template>

		<!-- Purchase Form View -->
		<record id="view_purchase_form_inherit_ext" model="ir.ui.view">
			<field name="name">view.purchase.form.inherit.ext</field>
			<field name="model">purchase.order</field>
			<field name="inherit_id" ref="purchase.purchase_order_form" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='order_line']" position="attributes">
					<attribute name="class">oe_form_shl</attribute>
				</xpath>
				<xpath expr="//button[@name='wkf_send_rfq']" position="after">
					<button name="wkf_po_done" states="approved" string="Set To Done"
						type="object" />
				</xpath>

				<xpath expr="//field[@name='incoterm_id']" position="replace">
				</xpath>

				<xpath expr="//field[@name='notes']" position="before">
					<field name="inword" placeholder="Amount In Words" />
				</xpath>

				<xpath expr="//field[@name='picking_type_id']" position="after">
					<field name="incoterm_id" />
					<!-- <field name="inword" /> -->
					<!-- <field name="is_margin" /> -->
				</xpath>
				<xpath expr="//field[@name='price_subtotal']" position="after">
					<!-- <field name="is_agreed" invisible="1" /> -->
					<!-- <field name="is_margin" invisible="1" /> -->

					<field name="agreed_price" />
					<field name="gross_margin" />
				</xpath>
				<xpath expr="//field[@name='date_approve']" position="after">
					<field name="is_burmart_order" />
				</xpath>

				<xpath expr="//field[@name='order_line']/tree//field[@name='gross_margin']" position="after">
<!--				<xpath expr="//field[@name='order_line']" position="inside">-->
					<field name="market_selling_price" invisible="context.get('default_burmart_order_field_hide')" />
					<field name="previous_buying_price" invisible="context.get('default_burmart_order_field_hide')" />
					<field name="current_buying_price" invisible="context.get('default_burmart_order_field_hide')" />
					<field name="difference_amount" invisible="context.get('default_burmart_order_field_hide')" />
					<field name="difference_status" invisible="context.get('default_burmart_order_field_hide')" />
					<field name="sku_status" invisible="context.get('default_burmart_order_field_hide')" />
					<field name="estimated_expiration_date" invisible="context.get('default_burmart_order_field_hide')" />
					<field name="margin" string="Margin(%)" invisible="context.get('default_burmart_order_field_hide')" />
					<field name="shelf_life" string="Shelf Life(Months)" invisible="context.get('default_burmart_order_field_hide')" />
				</xpath>

				<xpath expr="//field[@name='order_line']/tree//field[@name='company_id']" position="replace">
				</xpath>

			</field>
		</record>
		
		<record id="inherit_account_invoice_supplier_agreed" model="ir.ui.view">
			<field name="name">account.invoice.form</field>
			<field name="model">account.invoice</field>
			<field name="inherit_id" ref="account.invoice_supplier_form" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='currency_id']" position="after">
					<!-- <button name="claim_journal" states="open" string="Submit Claim" 
						attrs="{'invisible':[('state','!=',('open')),('type','!=','in_invoice')]}" 
						/> -->

					<field name="journal_claim" invisible="1" />
					<field name="due_date_rate" attrs="{'readonly' : [('journal_claim', '=', True)]}" />
					<button name="claim_journal" string="Submit Claim" type="object"
						class="oe_highlight"
						attrs="{'invisible':['|',('state','in',('done','draft','proforma','proforma2','credit_state','paid','cancel')),('journal_claim','=',True)]}" />
				</xpath>

				<field name="price_subtotal" position="after">
					<field name="agreed_price" groups="purchase.group_purchase_manager" />
					<field name="gross_margin" groups="purchase.group_purchase_manager" />
				</field>
			</field>
		</record>
		<record id="view_location_form_address" model="ir.ui.view">
			<field name="name">view.location.form</field>
			<field name="model">stock.location</field>
			<field name="inherit_id" ref="stock.view_location_form" />
			<field name="arch" type="xml">
				<data>
					<xpath expr="//field[@name='partner_id']" position="after">

						<field name="address" />
					</xpath>
				</data>
			</field>
		</record>

        <record id="burmart_purchase_form_action" model="ir.actions.act_window">
            <field name="name">Burmart Purchase Orders</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">purchase.order</field>
            <field name="view_mode">tree,form,graph,calendar</field>
            <field name="context">{}</field>
            <field name="domain">[('is_burmart_order','=',True)]</field> 
			<field name="context">{
				'default_is_burmart_order':True
				}
			</field>           
            <field name="search_view_id" ref="purchase.view_purchase_order_filter"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a quotation that will be converted into a purchase order. 
              </p><p>
                Use this menu to search within your purchase orders by
                references, supplier, products, etc. For each purchase order,
                you can track the related discussion with the supplier, control
                the products received and control the supplier invoices.
              </p>
            </field>
        </record>
        
        <menuitem action="burmart_purchase_form_action" id="menu_burmart_purchase_form_action" parent="purchase.menu_procurement_management" sequence="7"/>
		
	</data>
</openerp>